<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">
<body>
<form action="#" th:action="@{/CartItem/addcartItem}" th:object="${multiFormDto}" method="post">

    <label for="cartItemReqDto.quantity">quantity</label>
    <input type="text" th:field="*{cartItemReqDto.quantity}" id="cartItemReqDto.quantity" oninput="calculateSubtotal()">
    <span th:if="${#fields.hasErrors('cartItemReqDto.quantity')}" th:errors="*{cartItemReqDto.quantity}"></span>
    <br/>

    <label for="cartItemReqDto.subTotal">subTotal</label>
    <input type="text" th:field="*{cartItemReqDto.subTotal}" id="cartItemReqDto.subTotal">
    <span th:if="${#fields.hasErrors('cartItemReqDto.subTotal')}" th:errors="*{cartItemReqDto.subTotal}"></span>
    <br/>

    <label for="productResDTO.price">unitPrice</label>
    <input type="text" th:field="*{productResDTO.price}" id="productResDTO.price">
    <span th:if="${#fields.hasErrors('productResDTO.price')}" th:errors="*{productResDTO.price}"></span>
    <br/>

    <label for="cartReqDto.id">cart_id</label>
    <input type="text" th:field="*{cartReqDto.id}" id="cartReqDto.id">
    <span th:if="${#fields.hasErrors('cartReqDto.id')}" th:errors="*{cartReqDto.id}"></span>
    <br/>

    <label for="productResDTO.id">product_id</label>
    <input type="text" th:field="*{productResDTO.id}" id="productResDTO.id">
    <span th:if="${#fields.hasErrors('productResDTO.id')}" th:errors="*{productResDTO.id}"></span>
    <br/>

    <input type="submit" value="Add Book">
</form>

<script>
    // 페이지 로딩 시 초기값 계산
    window.onload = function() {
        calculateSubtotal();
    };
    function calculateSubtotal() {
        var quantity = document.getElementById("cartItemReqDto.quantity").value;
        var unitPrice = document.getElementById("productResDTO.price").value;

        // quantity와 unitPrice가 숫자인지 확인
        if (!isNaN(quantity) && !isNaN(unitPrice)) {
            var subtotal = quantity * unitPrice;
            document.getElementById("cartItemReqDto.subTotal").value = subtotal;
        } else {
            // 에러 처리: 유효한 숫자가 아닌 경우 메시지 표시 또는 다른 처리 수행
            alert("유효한 숫자가 아닙니다.");
        }
    }
</script>

</body>
</html>